<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>NewFrontPage</title>
    <link rel="stylesheet" href="../index.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
    <link rel="stylesheet" href="PersonalSite.css">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="PersonalSite.js"></script>
    <script src="https://cdn.anychart.com/releases/8.0.0/js/anychart-base.min.js"></script>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
</head>
<body>
<header>
    <div class="container">
        <nav>
            <span></span>
            <a href="PersonalSite.html"><img class ="logo" src="../Images/Logo2.svg" alt="Avatar"></a>
            <ul>
                <li><a href="#">About</a></li>
                <li><a href="#">Help</a> </li>
            </ul>
        </nav>
    </div>
    <div class="middle_menu">
        <div class="menu">


            <li class="item" id="profile" onclick="changeFunction('none'), checkMenu0(), closeInfo()">
                <input id="myid" type="checkbox">

                <label for="myid" class="btn_menu"><i class="fas fa-user"></i>Profile</label>
                <div class="smenu">
                    <a href="#">Settings</a>
                </div>
            </li>

            <li class="item" id="shifts" onclick="changeFunction('shifts'), checkMenu1(),openInfo()">
                <input id="myid1" type="checkbox">

                <label for="myid1" class="btn_menu"><i class="fas fa-sticky-note"></i>Shift</label>
                <div class="smenu">
                    <a href="#" onclick="document.getElementById('shift_add').style.display='block'">Add</a>
                    <a href="#" onclick="document.getElementById('shift_edit').style.display='block'; selectShift()">Edit</a>
                    <a href="#">Delete</a>
                </div>
            </li>

            <li class="item" id="job" onclick="changeFunction('job'), checkMenu2(), openInfo()">
                <input id="myid2" type="checkbox">

                <label for="myid2" class="btn_menu"><i class="fas fa-briefcase"></i>Job</label>
                <div class="smenu">
                    <a href="#" onclick="document.getElementById('job_add').style.display='block'">Add</a>
                    <a href="#">Edit</a>
                    <a href="#">Delete</a>
                </div>
            </li>
            <li class="item" id="workplace" onclick="changeFunction('workplace'), checkMenu3(), openInfo()">
                <input id="myid3" type="checkbox">

                <label for="myid3" class="btn_menu"><i class="fas fa-building"></i>Workplace</label>
                <div class="smenu">
                    <a href="#" onclick="document.getElementById('workplace_add').style.display='block'">Add</a>
                    <a href="#">Edit</a>
                    <a href="#">Delete</a>
                </div>
            </li>
            <li class="item">
                <a href="#" class="btn_menu"><i class="fas fa-sign-out-alt"></i>Logout</a>
            </li>
        </div>
    </div>

    <div class="popup_mid">
        <div class="popup_content" id="popup_content" >

            <div class="pop_top" id="pop_top2">
                <center>
                    <h1 id="pop_top_head"></h1>
                </center>

            </div>
            <div class="pop_left">
                <table id="left_table" class="left_table">

                </table>
            </div>
            <div class="pop_right" id="graph"></div>

        </div>
    </div>

</header>




    <!-- Modalerne -->

<!-- Shift -->

<!-- add -->

<div id="shift_add" class="modal2">
    <div class="modal2-content">
        <span onclick="document.getElementById('shift_add').style.display='none'" class="close2">&times;</span>
    <form action="">
        <div class="form_per">
            <label><b>What job is the shift?</b></label>
            <input  type="text" placeholder="What job is the shift?" name="job_to_shift" required>

            <label><b>When do you start your shift?</b></label>
            <input class="w3-input w3-border w3-margin-bottom" type="time" name="shift_start" required>

            <label><b>When does the shift stop?</b></label>
            <input class="w3-input w3-border w3-margin-bottom" type="time" name="shift_end" required>

            <label><b>How long break do you have on the shift? (in minutes)</b></label>
            <input class="w3-input w3-border" type="number" placeholder="Enter minutes of your break" name="psw" required>

            <button  type="submit" class="submit">Save shift</button>
        </div>
    </form>
    </div>
</div>


<!-- edit -->

<div id="shift_edit" class="modal2">
    <div class="modal2-content">
        <span onclick="document.getElementById('shift_edit').style.display='none'" class="close2">&times;</span>
            <form action="">
                <center>
                <select id="select" onchange="shiftEditSubmitChange(value)"></select>
                </center>
                <button type="submit" name="jens" value="submit" id="shift_edit_submit" class="submit">Edit shift</button>
            </form>
    </div>
</div>

<!-- delete -->

<!-- job -->

<div id="job_add" class="modal2">
    <div class="modal2-content">
        <span onclick="document.getElementById('job_add').style.display='none'" class="close2">&times;</span>
        <form action="/action_page.php">
            <div class="form_per">
                <label><b>What company is the job for?</b></label>
                <input  type="text" placeholder="What company is the job for?" name="company_to_job" required>

                <label><b>When did you get hired?</b></label>
                <input class="w3-input w3-border w3-margin-bottom" type="date" name="job_start" required>

                <label><b>How much do you earn a hour?</b></label>
                <input class="w3-input w3-border" type="number" placeholder="Enter you hourly income" name="psw" required>

                <button  type="submit" class="submit">Login</button>
            </div>
        </form>
    </div>
</div>

<!-- workplace -->

<div id="workplace_add" class="modal2">
    <div class="modal2-content">
        <span onclick="document.getElementById('workplace_add').style.display='none'" class="close2">&times;</span>
        <form action="">
            <div class="form_per">
                <label><b>What address are you company at?</b></label>
                <input  type="text" placeholder="Address of your company" name="company_address" required>

                <label><b>What are the phone number?</b></label>
                <input class="w3-input w3-border w3-margin-bottom" placeholder="Phone number" type="text" name="phone_number" required>

                <label><b>What is the zip code of the address?</b></label>
                <input class="w3-input w3-border w3-margin-bottom" placeholder="Company address" type="text" name="shift_end" required>

                <label><b>What town is the company in?</b></label>
                <input class="w3-input w3-border" type="text" placeholder="Town where company is located" name="psw" required>

                <button  type="submit" class="submit">Login</button>
            </div>
        </form>
    </div>
</div>







<footer>
    <script type="text/javascript" src="PersonalSite.js"></script>
    <script>
        //her er delene som fremkalder content.
        function openInfo() {

            document.getElementById('popup_content').style.width = '100%';
            document.getElementById('popup_content').style.height = '80%';
            hoursOnWorkMounthly();





        }
        function closeInfo() {
            document.getElementById('popup_content').style.width = '0px';
            document.getElementById('popup_content').style.height = '0px';

        }


        //her er delene som ændre ved content.
        function changeFunction(site) {
            var elem = document.getElementById('content');
            if (site == 'shifts'){
                header('Shifts');
                left('shifts');
            }
            if (site == 'job'){
                header('Job');
                left('job');
            }
            if (site == 'workplace') {
                header('Workplace');
                left('workplace');
            }
            if (site == 'none'){
                header('');
                left('none');
            }
        }

        function header(head) {
            document.getElementById('pop_top_head').innerHTML = head;
            if (head == ''){
                document.getElementById('pop_top2').style.backgroundColor = 'transparent';
            } else {
                document.getElementById('pop_top2').style.backgroundColor = 'rgb(52, 152, 219)';
            }
        }



        function left(type) {
            if (type == 'shifts') {
                shifts();
            }
            if (type == 'job'){
                job();
            }
            if (type == 'workplace') {
                workplace();
            }
            if (type == 'none'){
                none();
            }

        }

        function hoursOnWorkMounthly(){
            anychart.onDocumentReady(function() {


                var today = new Date();
                var mounth = String(today.getMonth());
                var year = today.getFullYear();

                var nrOfDays = daysInMonth(mounth,year);

                // set the data
                var data = {
                    header: ["Date", "Hours"]
                };

                //her finder jeg alle de job som er forbundet med brugeren.
                var nrOfJobs = new Array();
                for (var loop = 0; loop < findNrOfCompanys() ;loop++) {
                    nrOfJobs[loop] = findCompanyId(loop);
                }

                mounth++;

                //laver dataset
                var dataSets = new Array();

                for (var l=0;l<findNrOfCompanys();l++) {
                    var dataSet = anychart.data.set(data);
                    for (var i = 0; i < nrOfDays; i++) {
                        var name = 'Den ' + (i + 1) + '. i ' + (mounth) + '.';
                        dataSet.append([name, hoursOfWork()]);
                    };
                    dataSets[l] = dataSet;
                };




                // create the chart
                var chart = anychart.column()
                chart.animation(true);

                var serieSet = new Array();

                //laver dataen til serie sæt.

                for (var r = 0; r<dataSets.length; r++) {
                    serieSet[r] = dataSets[r].mapAs({'x': 0, 'value': 1})
                }

                chart.yScale().stackMode('value');



                // add the data
                for (var c = 0; c<serieSet.length; c++){
                    chart.column(serieSet[c]);
                }


                var i=0;
                // create a loop
                while (chart.getSeriesAt(i)){
                    // rename each series
                    chart.getSeriesAt(i).name(findWork(nrOfJobs[i]));
                    i++;
                }

                // set the chart title
                chart.title("Hours on work");

                // draw
                chart.container("graph");
                chart.draw();
            });
        }


    </script>
</footer>


</body>
</html>